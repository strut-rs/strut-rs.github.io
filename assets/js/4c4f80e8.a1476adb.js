"use strict";(self.webpackChunkstrut_home=self.webpackChunkstrut_home||[]).push([[833],{6288:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"components/index","title":"Components","description":"[docs-config]: /docs/config","source":"@site/docs/06_components/index.mdx","sourceDirName":"06_components","slug":"/components","permalink":"/docs/components","draft":false,"unlisted":false,"editUrl":"https://github.com/strut-rs/strut-rs.github.io/edit/main/docs/06_components/index.mdx","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"slug":"/components"},"sidebar":"docs","previous":{"title":"Profile","permalink":"/docs/profile"},"next":{"title":"Logging & tracing","permalink":"/docs/components/tracing"}}');var r=n(4848),i=n(8453);const o={sidebar_position:6,slug:"/components"},c="Components",a={},l=[{value:"Component structure",id:"component-structure",level:2},{value:"\u2611\ufe0e Configuration section",id:"configuration-section",level:3},{value:"\u2611\ufe0e Startup logic",id:"startup-logic",level:3},{value:"\u2611\ufe0e Client-facing facade.",id:"client-facing-facade",level:3},{value:"\u2611\ufe0e Spindown logic.",id:"spindown-logic",level:3},{value:"Conventions",id:"conventions",level:2},{value:"API re-export",id:"api-re-export",level:3},{value:"Contributing",id:"contributing",level:2}];function d(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"components",children:"Components"})}),"\n",(0,r.jsxs)(t.p,{children:["The value of Strut primarily comes from the components, which are included via Cargo features on the ",(0,r.jsx)(t.a,{href:"https://crates.io/crates/strut",children:(0,r.jsx)(t.code,{children:"strut"})})," crate."]}),"\n",(0,r.jsx)(t.h2,{id:"component-structure",children:"Component structure"}),"\n",(0,r.jsxs)(t.p,{children:["A typical Strut component takes a popular Rust crate and removes boilerplate code required to configure or use that crate.\nPossible customization choices are externalized into ",(0,r.jsx)(t.a,{href:"/docs/config",children:"config"}),", and any trivial setup/spindown logic is moved under the hood."]}),"\n",(0,r.jsx)(t.p,{children:"Such component would usually have some combination of the following:"}),"\n",(0,r.jsx)(t.h3,{id:"configuration-section",children:"\u2611\ufe0e Configuration section"}),"\n",(0,r.jsxs)(t.p,{children:["A config section is a de-serializable struct that is included at the top level of ",(0,r.jsx)(t.a,{href:"https://docs.rs/strut/latest/strut/struct.AppConfig.html",children:(0,r.jsx)(t.code,{children:"AppConfig"})}),"."]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.em,{children:"Example"}),": ",(0,r.jsx)(t.a,{href:"https://docs.rs/strut-tracing/latest/strut_tracing/struct.TracingConfig.html",children:(0,r.jsx)(t.code,{children:"TracingConfig"})})," from the ",(0,r.jsx)(t.a,{href:"/docs/components/tracing",children:"tracing"})," component."]}),"\n",(0,r.jsx)(t.li,{children:"These structs enable deserialization from empty, partial, or fuzzy input."}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"startup-logic",children:"\u2611\ufe0e Startup logic"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.em,{children:"Example"}),": ",(0,r.jsx)(t.a,{href:"https://docs.rs/tracing/latest/tracing/subscriber/fn.set_global_default.html",children:"setting global subscriber"})," from the ",(0,r.jsx)(t.a,{href:"/docs/components/tracing",children:"tracing"})," component."]}),"\n",(0,r.jsxs)(t.li,{children:["This is normally called from a ",(0,r.jsx)(t.a,{href:"https://docs.rs/strut/latest/strut/struct.Launchpad.html",children:(0,r.jsx)(t.code,{children:"Launchpad"})})," wiring."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"client-facing-facade",children:"\u2611\ufe0e Client-facing facade."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.em,{children:"Example"}),": ",(0,r.jsx)(t.a,{href:"https://docs.rs/strut/latest/strut/struct.Database.html",children:(0,r.jsx)(t.code,{children:"Database"})})," from the ",(0,r.jsx)(t.a,{href:"/docs/components/database",children:"database"})," component."]}),"\n",(0,r.jsx)(t.li,{children:"A facade exposes associated functions that return pre-fabricated objects, such as database connection pools."}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"spindown-logic",children:"\u2611\ufe0e Spindown logic."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.em,{children:"Example"}),": closing database connections before the process exits."]}),"\n",(0,r.jsxs)(t.li,{children:["A component registers itself in the ",(0,r.jsx)(t.a,{href:"https://docs.rs/strut/latest/strut/struct.AppSpindown.html",children:"spindown registry"}),"; waits for the ",(0,r.jsx)(t.a,{href:"https://docs.rs/strut/latest/strut/struct.AppContext.html",children:"application context"})," to terminate; performs spindown duties; then signals back to the registry that it completed gracefully."]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"conventions",children:"Conventions"}),"\n",(0,r.jsx)(t.h3,{id:"api-re-export",children:"API re-export"}),"\n",(0,r.jsxs)(t.p,{children:["When the underlying third-party crate is intended to be used after configuration, Strut typically re-exports that crate\u2019s public API, either fully or partially.\nFor example, the ",(0,r.jsx)(t.a,{href:"/docs/components/tracing",children:"tracing"})," component re-esports parts of the ",(0,r.jsx)(t.a,{href:"https://crates.io/crates/tracing",children:(0,r.jsx)(t.code,{children:"tracing"})})," crate\u2019s API under the ",(0,r.jsx)(t.code,{children:"strut::tracing::*"})," module.\nThe idea is that after enabling the Strut component, there is no need to depend also on the underlying crate."]}),"\n",(0,r.jsx)(t.h2,{id:"contributing",children:"Contributing"}),"\n",(0,r.jsxs)(t.p,{children:["Strut could always use more components.\nWhile, ",(0,r.jsx)(t.a,{href:"/docs/custom",children:"custom integrations"})," are possible in the client code, a component is most convenient when the ",(0,r.jsx)(t.a,{href:"https://crates.io/crates/strut",children:(0,r.jsx)(t.code,{children:"strut"})})," crate is aware of it.\nWe are maintaining an open door ",(0,r.jsx)(t.a,{href:"https://github.com/strut-rs/strut/blob/master/CONTRIBUTING.md",children:"contribution policy"}),"."]}),"\n",(0,r.jsx)(t.p,{children:"If you have an eye on a popular Rust crate that could use some boilerplate trimming, you have options to contribute to Strut:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["If you just want to raise awareness \u2014 check out our ",(0,r.jsx)(t.a,{href:"https://github.com/strut-rs/strut/issues",children:"GitHub issues"}),".","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Search for and upvote the petition to add your crate."}),"\n",(0,r.jsx)(t.li,{children:"Or create a new petition if your crate isn\u2019t yet mentioned."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["If you feel like contributing your code and efforts \u2014 firstly, thank you.","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Our ",(0,r.jsx)(t.a,{href:"https://discord.gg/KNkJuMkY",children:"Discord server"})," is the place to go for discussions and advice."]}),"\n",(0,r.jsxs)(t.li,{children:["You may also want to check out our ",(0,r.jsx)(t.a,{href:"https://github.com/strut-rs/strut/blob/master/CONTRIBUTING.md",children:(0,r.jsx)(t.code,{children:"CONTRIBUTING.md"})}),"."]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>c});var s=n(6540);const r={},i=s.createContext(r);function o(e){const t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);